

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modules and Classes &mdash; Wishbone 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Wishbone 0.1 documentation" href="index.html" />
    <link rel="next" title="Installation" href="install.html" />
    <link rel="prev" title="Example" href="example.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="example.html" title="Example"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Wishbone 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="modules-and-classes">
<h1>Modules and Classes<a class="headerlink" href="#modules-and-classes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-wishbone.main">
<span id="wishbone"></span><h2>Wishbone<a class="headerlink" href="#module-wishbone.main" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.main.Wishbone">
<em class="property">class </em><tt class="descclassname">wishbone.main.</tt><tt class="descname">Wishbone</tt><a class="reference internal" href="_modules/wishbone/main.html#Wishbone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.main.Wishbone" title="Permalink to this definition">¶</a></dt>
<dd><p>The main class in which the Wishbone modules are registered and managed.</p>
<dl class="method">
<dt id="wishbone.main.Wishbone.connect">
<tt class="descname">connect</tt><big>(</big><em>source</em>, <em>destination</em><big>)</big><a class="reference internal" href="_modules/wishbone/main.html#Wishbone.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.main.Wishbone.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new background Greenthread which continuously consumes all messages from source into destination.</p>
<p>This function is used to connect the queue of one module with the queue of another.  A typical useage is to connect outbox from module1
to inbox of module2.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.main.Wishbone.registerModule">
<tt class="descname">registerModule</tt><big>(</big><em>config</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/main.html#Wishbone.registerModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.main.Wishbone.registerModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a Wishbone Module into the framework.  All modules used within Wishbone should be regesitered through this function.</p>
<p>This function receives a tuple containing 3 values.  Any further args or kwargs are used to initialize the actual module you register.</p>
<p>The config parameter should be a tuple of 3 strings:</p>
<blockquote>
<div><p>(module, class, name)</p>
<ul class="simple">
<li>module:     The name of the module to import.</li>
<li>class:      The name of the class to initialize</li>
<li>name:       The name under which the module should be initialized.</li>
</ul>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>args and <a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs are passed to the class which is initialized.</p>
</div></blockquote>
<p>self.modules contains a list of all registered modules.  Also, each registered module is registered under self.name, where name is last
value of the tuple.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.main.Wishbone.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/main.html#Wishbone.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.main.Wishbone.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Function which starts all registered Wishbone modules.</p>
<p>Function which runs over all registered instances/modules and tries to execute the start() function in order to let that module start
to consume the messages of its inbox and execute the consume function on each message.
This function blocks from exiting.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.main.Wishbone.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/main.html#Wishbone.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.main.Wishbone.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Function which stops all registered Wishbone modules.</p>
<p>Function which runs over all registered instances/modules and tries to execute its stop() function in order to stop that module.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-wishbone.toolkit">
<span id="toolkit"></span><h2>Toolkit<a class="headerlink" href="#module-wishbone.toolkit" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.toolkit.Block">
<em class="property">class </em><tt class="descclassname">wishbone.toolkit.</tt><tt class="descname">Block</tt><a class="reference internal" href="_modules/wishbone/toolkit.html#Block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.Block" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class providing a global lock.</p>
<dl class="method">
<dt id="wishbone.toolkit.Block.block">
<tt class="descname">block</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#Block.block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.Block.block" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple blocking function.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.Block.release">
<tt class="descname">release</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#Block.release"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.Block.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the lock flag which essentially unlocks.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.Block.wait">
<tt class="descname">wait</tt><big>(</big><em>timeout=None</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#Block.wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.Block.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Blocks from exiting until self.lock is set.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wishbone.toolkit.PrimitiveActor">
<em class="property">class </em><tt class="descclassname">wishbone.toolkit.</tt><tt class="descname">PrimitiveActor</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#PrimitiveActor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.PrimitiveActor" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class used to create Wishbone modules.</p>
<p>This base class offers Wishbone specific functionalities and objects.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd>name:      Gives a name to the module</dd>
</dl>
<dl class="method">
<dt id="wishbone.toolkit.PrimitiveActor.command">
<tt class="descname">command</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#PrimitiveActor.command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.PrimitiveActor.command" title="Permalink to this definition">¶</a></dt>
<dd><p>A placeholder not implemented for the moment.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.PrimitiveActor.consume">
<tt class="descname">consume</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#PrimitiveActor.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.PrimitiveActor.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>A function which should be overridden by the Wishbone module.</p>
<p>This function, when called throws an exception.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.PrimitiveActor.logMetrics">
<tt class="descname">logMetrics</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#PrimitiveActor.logMetrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.PrimitiveActor.logMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a line with metrics of the spefic module.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.PrimitiveActor.shutdown">
<tt class="descname">shutdown</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#PrimitiveActor.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.PrimitiveActor.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>A function which could be overridden by the Wisbone module.</p>
<p>This function is called on shutdown.  Make sure you include self.lock=False otherwise that greenthread will hang on shutdown and never exit.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="wishbone.toolkit.QueueFunctions">
<em class="property">class </em><tt class="descclassname">wishbone.toolkit.</tt><tt class="descname">QueueFunctions</tt><a class="reference internal" href="_modules/wishbone/toolkit.html#QueueFunctions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.QueueFunctions" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for Wishbone Actor classes.  Shouldn&#8217;t be called directly but is inherited by PrimitiveActor.</p>
<dl class="method">
<dt id="wishbone.toolkit.QueueFunctions.checkIntegrity">
<tt class="descname">checkIntegrity</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#QueueFunctions.checkIntegrity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.QueueFunctions.checkIntegrity" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the integrity of the messages passed over the different queues.</p>
<p>The format of the messages should be:</p>
<p>{ &#8216;headers&#8217;: {}, data: {} }</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.QueueFunctions.sendCommand">
<tt class="descname">sendCommand</tt><big>(</big><em>data</em>, <em>destination='*'</em>, <em>queue='outbox'</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#QueueFunctions.sendCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.QueueFunctions.sendCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Placeholder not implemented for the moment.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.QueueFunctions.sendData">
<tt class="descname">sendData</tt><big>(</big><em>data</em>, <em>queue='outbox'</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#QueueFunctions.sendData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.QueueFunctions.sendData" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits data to one of the module its queues.</p>
<p>The data send by this funtion is automatically checked on integrity, whether it has the right Wishbone data structure.  If that is not the case
an exception is returned.</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>queue:  Determines to which queue data should be send.  By default this is &#8216;outbox&#8217;.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="wishbone.toolkit.QueueFunctions.sendRaw">
<tt class="descname">sendRaw</tt><big>(</big><em>data</em>, <em>queue='outbox'</em><big>)</big><a class="reference internal" href="_modules/wishbone/toolkit.html#QueueFunctions.sendRaw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.toolkit.QueueFunctions.sendRaw" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits data to one of the module&#8217;s queues.</p>
<p>Allows you to bypass message integrity checking.  Its usage should be sparse, although it&#8217;s usefull when you want to send data back 
to a module as it would have come from the outside world.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="io-modules">
<h1>IO modules<a class="headerlink" href="#io-modules" title="Permalink to this headline">¶</a></h1>
<p>IO modules are modules which receive/submit messages from/to an outside source.</p>
<div class="section" id="module-wishbone.io_modules.broker">
<span id="broker"></span><h2>Broker<a class="headerlink" href="#module-wishbone.io_modules.broker" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.io_modules.broker.Broker">
<em class="property">class </em><tt class="descclassname">wishbone.io_modules.broker.</tt><tt class="descname">Broker</tt><big>(</big><em>name</em>, <em>host</em>, <em>vhost='/'</em>, <em>username='guest'</em>, <em>password='guest'</em>, <em>prefetch_count=1</em>, <em>no_ack=False</em>, <em>consume_queue='wishbone_in'</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/broker.html#Broker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.broker.Broker" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wisbone module which handles AMQP0.8 input and output.  It&#8217;s meant to be resillient to disconnects and broker unavailability.</p>
<p>Data consumed from the broker goes into self.inbox
Data which should be produced towards to broker goes into self.outbox</p>
<p>Acknowledging:</p>
<p>Messages which arrive in the outbox and which have an acknowledge tag in the header will be acknowledged.
When a broker_tag is submitted to the acknowledge queue the tag is acknowledged with the broker.</p>
<p>The message submitted to self.outbox should have 3 values in its headers:</p>
<blockquote>
<div><p>{&#8216;header&#8217;:{&#8216;broker_exchange&#8217;:name, &#8216;broker_key&#8217;:name, &#8216;broker_tag&#8217;:tag}}</p>
<ul class="simple">
<li>broker_exchange:    The exchange to which data should be submitted.</li>
<li>broker_key:         The routing key used when submitting data.</li>
<li>broker_tag:         The tag used to acknowledge the message from the broker.</li>
</ul>
<p>Queues:</p>
<ul class="simple">
<li>inbox:              The queue containing messages coming from the broker.</li>
<li>outbox:             The queue containing messages to the broker.</li>
<li>acknowledge:        The queue containing messages to acknowledge</li>
</ul>
<p>Parameters:</p>
<ul class="simple">
<li>name:               The name you want this module to be registered under.</li>
<li>host:               The name or IP of the broker.</li>
<li>vhost:              The virtual host of the broker. By default this is &#8216;/&#8217;.</li>
<li>username:           The username to connect to the broker.  By default this is &#8216;guest&#8217;.</li>
<li>password:           The password to connect to the broker.  By default this is &#8216;guest&#8217;.</li>
<li>consume_queue:      The queue which should be consumed. By default this is &#8220;wishbone_in&#8221;.</li>
<li>prefetch_count:     The amount of messages consumed from the queue at once.</li>
<li>no_ack:             Should no acknowledgements be required? By default this is False.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="wishbone.io_modules.broker.Broker.acknowledgeMessage">
<tt class="descname">acknowledgeMessage</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/broker.html#Broker.acknowledgeMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.broker.Broker.acknowledgeMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Acknowledges messages</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.broker.Broker.consume">
<tt class="descname">consume</tt><big>(</big><em>doc</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/broker.html#Broker.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.broker.Broker.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Is called upon each message coming from the broker infrastructure.</p>
<p>It also makes sure the incoming data is encapsulated in the right Wishbone format.
When successful, this function acknowledges the message from the broker.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.broker.Broker.produce">
<tt class="descname">produce</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/broker.html#Broker.produce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.broker.Broker.produce" title="Permalink to this definition">¶</a></dt>
<dd><p>Is called upon each message going to to the broker infrastructure.</p>
<p>This function is called by the consume() function.  If the correct header info isn&#8217;t present (but that would be odd at this point), the data is purged.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.broker.Broker.shutdown">
<tt class="descname">shutdown</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/broker.html#Broker.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.broker.Broker.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called on shutdown().</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.broker.Broker.submitBroker">
<tt class="descname">submitBroker</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/broker.html#Broker.submitBroker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.broker.Broker.submitBroker" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits all data from self.outbox into the broker by calling the produce() funtion.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-wishbone.io_modules.domainsocket">
<span id="domainsocket"></span><h2>DomainSocket<a class="headerlink" href="#module-wishbone.io_modules.domainsocket" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.io_modules.domainsocket.DomainSocket">
<em class="property">class </em><tt class="descclassname">wishbone.io_modules.domainsocket.</tt><tt class="descname">DomainSocket</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/domainsocket.html#DomainSocket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.domainsocket.DomainSocket" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wishbone IO module which handles unix domain socket.</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>name:       The name you want this module to be registered under.</li>
<li>file:       The absolute filename of the named pipe.</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-wishbone.io_modules.inputgenerator">
<span id="inputgenerator"></span><h2>InputGenerator<a class="headerlink" href="#module-wishbone.io_modules.inputgenerator" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.io_modules.inputgenerator.InputGenerator">
<em class="property">class </em><tt class="descclassname">wishbone.io_modules.inputgenerator.</tt><tt class="descname">InputGenerator</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/inputgenerator.html#InputGenerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.inputgenerator.InputGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>A WishBone class which generates random data at different configurable specifications.
It&#8217;s primary use is for testing.</p>
<p>Parameters:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>min_payload:  The minimum length of each random generated message.</dt>
<dd><p class="first last">Default: 0
Type: Integer</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>max_payload:  The maximum length of each random generated message.</dt>
<dd><p class="first last">Default: 1
Type: Integer</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>min_interval: The minimum time in seconds between each generated messages.</dt>
<dd><p class="first last">Default: 0
Type: Integer</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>max_interval: The maximum time in seconds between each generated messages.</dt>
<dd><p class="first last">Default: 0
Type: Integer</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>min_outage_start: The minimum time in seconds the next outage can start.</dt>
<dd><p class="first last">Default: 60
type: Int</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>max_outage_start: The maximum time in seconds the next outage can start.</dt>
<dd><p class="first last">Default: 600
type: Int</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>min_outage_length:    The minimum time in seconds an outage can last.</dt>
<dd><p class="first last">Default: 0
Type: Integer</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>max_outage_length:    The maximum time in seconds an outage can last.</dt>
<dd><p class="first last">Default: 0
Type: Integer</p>
</dd>
</dl>
</li>
</ul>
<p>length:     Simulates the variable length of message data.</p>
<p>interval:   Simulates the variable interval rate data is produced.</p>
<dl class="docutils">
<dt>outage:     Simulates the connectivity problems for incoming data.  Under normal conditions</dt>
<dd>there&#8217;s a constant stream.  It might happen however incoming connection is
interrupted, data is being build up somewhere and after connectivity restores a
big chunk of data comes in.</dd>
</dl>
</div></blockquote>
<dl class="method">
<dt id="wishbone.io_modules.inputgenerator.InputGenerator.executeOutage">
<tt class="descname">executeOutage</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/inputgenerator.html#InputGenerator.executeOutage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.inputgenerator.InputGenerator.executeOutage" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the outage by locking the reaper.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.inputgenerator.InputGenerator.planOutage">
<tt class="descname">planOutage</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/inputgenerator.html#InputGenerator.planOutage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.inputgenerator.InputGenerator.planOutage" title="Permalink to this definition">¶</a></dt>
<dd><p>Plans when the next outage will occur.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.inputgenerator.InputGenerator.reaper">
<tt class="descname">reaper</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/inputgenerator.html#InputGenerator.reaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.inputgenerator.InputGenerator.reaper" title="Permalink to this definition">¶</a></dt>
<dd><p>The reaper runs actually submits the randomly generated data from the local queue into the outgoing queue.
The goal of this is to make to reaper stop working for min_outage to max_outage to simulate an outage.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-wishbone.io_modules.namedpipe">
<span id="namedpipe"></span><h2>NamedPipe<a class="headerlink" href="#module-wishbone.io_modules.namedpipe" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.io_modules.namedpipe.NamedPipe">
<em class="property">class </em><tt class="descclassname">wishbone.io_modules.namedpipe.</tt><tt class="descname">NamedPipe</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/namedpipe.html#NamedPipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.namedpipe.NamedPipe" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wishbone IO module which handles named pipe input.</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>name:       The name you want this module to be registered under.</li>
<li>file:       The absolute filename of the named pipe.</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-wishbone.io_modules.udpserver">
<span id="udpserver"></span><h2>UDPserver<a class="headerlink" href="#module-wishbone.io_modules.udpserver" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.io_modules.udpserver.UDPServer">
<em class="property">class </em><tt class="descclassname">wishbone.io_modules.udpserver.</tt><tt class="descname">UDPServer</tt><big>(</big><em>name</em>, <em>port</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/udpserver.html#UDPServer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.udpserver.UDPServer" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wishbone module which handles UDP input.</p>
<p>Data received by the module is put into self.inbox</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>name:       The name you want this module to be registered under.</li>
<li>port:       The port on which the server should listen.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="wishbone.io_modules.udpserver.UDPServer.handle">
<tt class="descname">handle</tt><big>(</big><em>data</em>, <em>address</em><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/udpserver.html#UDPServer.handle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.udpserver.UDPServer.handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Is called upon each incoming message, makes sure the data has the right Wishbone format and writes the it into self.inbox</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.udpserver.UDPServer.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/udpserver.html#UDPServer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.udpserver.UDPServer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Blocking function which starts the UDP server.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.io_modules.udpserver.UDPServer.shutdown">
<tt class="descname">shutdown</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/io_modules/udpserver.html#UDPServer.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.io_modules.udpserver.UDPServer.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called on shutdown().</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>Modules receive from, process and submit messages to other modules.</p>
<div class="section" id="module-wishbone.modules.brokerloopback">
<span id="brokerloopback"></span><h2>BrokerLoopback<a class="headerlink" href="#module-wishbone.modules.brokerloopback" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.modules.brokerloopback.BrokerLoopback">
<em class="property">class </em><tt class="descclassname">wishbone.modules.brokerloopback.</tt><tt class="descname">BrokerLoopback</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/brokerloopback.html#BrokerLoopback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.brokerloopback.BrokerLoopback" title="Permalink to this definition">¶</a></dt>
<dd><p>The BrokerLoopback class does nothing more than adding broker data to the headers of each message and writes that back to its
outgoing queue.</p>
<p>Parameters:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>key <span class="classifier-delimiter">:</span> <span class="classifier">The routing key to which to send incoming data.</span></dt>
<dd><p class="first last">Default: name
Type: string</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>exchange <span class="classifier-delimiter">:</span> <span class="classifier">The exchange to write data to.</span></dt>
<dd><p class="first last">Default: &#8216;&#8217;
Type: string</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dump <span class="classifier-delimiter">:</span> <span class="classifier">Dumps x amount of messages into the Broker.</span></dt>
<dd><p class="first last">Default: 0
Type: int</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-wishbone.modules.compressor">
<span id="compressor"></span><h2>Compressor<a class="headerlink" href="#module-wishbone.modules.compressor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.modules.compressor.Compressor">
<em class="property">class </em><tt class="descclassname">wishbone.modules.compressor.</tt><tt class="descname">Compressor</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/compressor.html#Compressor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.compressor.Compressor" title="Permalink to this definition">¶</a></dt>
<dd><p>A Wishbone module which compresses uncompressed data and decompresses compressed data using Snappy.</p>
<p>The module detects whether data is compressed or not.</p>
</dd></dl>

</div>
<div class="section" id="module-wishbone.modules.jsonvalidator">
<span id="jsonvalidator"></span><h2>Jsonvalidator<a class="headerlink" href="#module-wishbone.modules.jsonvalidator" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.modules.jsonvalidator.JSONValidator">
<em class="property">class </em><tt class="descclassname">wishbone.modules.jsonvalidator.</tt><tt class="descname">JSONValidator</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/jsonvalidator.html#JSONValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.jsonvalidator.JSONValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>A WishBone module which verifies JSON data against a validator schema loaded from file.</p>
<p>Messages consumed from the inbox queue is verified against a Validator schema.  When the message is not a valid JSON document
or when it doesn&#8217;t match your predifined Validator schema, it is dropped.</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>schema:     The location and filename of the schema to load.  The schema should follow <a class="reference external" href="http://json-schema.org/">http://json-schema.org/</a> specifications.</li>
<li>convert:    When True it will aditionally convert the incoming JSON string to a Python object.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="wishbone.modules.jsonvalidator.JSONValidator.consume">
<tt class="descname">consume</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/jsonvalidator.html#JSONValidator.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.jsonvalidator.JSONValidator.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Executed for each incoming message.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.modules.jsonvalidator.JSONValidator.loadSchema">
<tt class="descname">loadSchema</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/modules/jsonvalidator.html#JSONValidator.loadSchema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.jsonvalidator.JSONValidator.loadSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the json-schema definition from disk.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.modules.jsonvalidator.JSONValidator.validateBroker">
<tt class="descname">validateBroker</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/jsonvalidator.html#JSONValidator.validateBroker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.jsonvalidator.JSONValidator.validateBroker" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates data against the JSON schema.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-wishbone.modules.skeleton">
<span id="skeleton"></span><h2>Skeleton<a class="headerlink" href="#module-wishbone.modules.skeleton" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.modules.skeleton.Skeleton">
<em class="property">class </em><tt class="descclassname">wishbone.modules.skeleton.</tt><tt class="descname">Skeleton</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/skeleton.html#Skeleton"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.skeleton.Skeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Skeleton class is a minimal Actor class which does nothing more than shoveling data from its inbox to its outbox.</p>
<p>It can be used as an example/base for new blocks.</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>name :    The name to assign to the module instance in Wishbone.</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-wishbone.modules.stdout">
<span id="stdout"></span><h2>STDOUT<a class="headerlink" href="#module-wishbone.modules.stdout" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.modules.stdout.STDOUT">
<em class="property">class </em><tt class="descclassname">wishbone.modules.stdout.</tt><tt class="descname">STDOUT</tt><big>(</big><em>name</em>, <em>complete=False</em>, <em>purge=False</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/stdout.html#STDOUT"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.stdout.STDOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>STDOUT class is a minimal Actor class which does nothing more than printing the messages from inbox and putting them back in outbox.</p>
<p>Parameters:</p>
<blockquote>
<div><ul class="simple">
<li>complete: If True, it prints out the message in Wishbone format including headers, if False only the content of the data field itself.</li>
<li>purge: When True the message is not put into the outbox but is purged.</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-wishbone.modules.tippingbucket">
<span id="tippingbucket"></span><h2>TippingBucket<a class="headerlink" href="#module-wishbone.modules.tippingbucket" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wishbone.modules.tippingbucket.TippingBucket">
<em class="property">class </em><tt class="descclassname">wishbone.modules.tippingbucket.</tt><tt class="descname">TippingBucket</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/wishbone/modules/tippingbucket.html#TippingBucket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.tippingbucket.TippingBucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Buffers unicode data and dumps to the output on 2 conditions:</p>
<blockquote>
<div><ul class="simple">
<li>Last data enteered in buffer is older than x seconds.</li>
<li>Total data in buffer is x size.</li>
</ul>
</div></blockquote>
<p>When the buffer is empty, the header of the first incoming message will be used as the header
for the message going out containing the content of the buffer.  If you want to override that
header with a predefined one then use the &lt;predefined_header&gt; option.</p>
<p>Realize this is a buffer PER WishBone instance.</p>
<p>Parameters:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>age:  The time in seconds since the first update when the buffer is flushed.</dt>
<dd><p class="first last">Default: 10
Type: Int</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>size: The total size in bytes of the buffer when it is flushed.</dt>
<dd><p class="first last">Default: 10000
Type: Int</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>predefined_header:    Once the buffer is flushed the message containing the content of the</dt>
<dd><p class="first last">buffer will have this header instead of the header coming from the
first package entering the buffer.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Disclaimer: The size of the buffer is expressed in bytes.  This is <em>only</em> valid when you use</dt>
<dd>&#8220;single-byte encoding&#8221; characters.  Even then it&#8217;s going to be an approximation.
When unicode is used then this counter is not going to be realistic anymore.</dd>
<dt>Disclaimer2:    Binary data is not going to work.  If you require that, encode into base64 or</dt>
<dd><p class="first">something similar.  In that case take the growth of that into account:</p>
<blockquote>
<div>~ output_size = ((input_size - 1) / 3) * 4 + 4</div></blockquote>
<p class="last">So 256 bytes binary data results into 344 bytes of Base64 data.</p>
</dd>
<dt>ToDo(smetj):    Check for each incoming string which type of encoding we&#8217;re talking about</dt>
<dd>and take into account when &#8220;calculating&#8221; the total size of the buffer.</dd>
</dl>
<dl class="method">
<dt id="wishbone.modules.tippingbucket.TippingBucket.flushBuffer">
<tt class="descname">flushBuffer</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/modules/tippingbucket.html#TippingBucket.flushBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.tippingbucket.TippingBucket.flushBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes the buffer.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.modules.tippingbucket.TippingBucket.reaper">
<tt class="descname">reaper</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/modules/tippingbucket.html#TippingBucket.reaper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.tippingbucket.TippingBucket.reaper" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether our cache is expired and flush the buffer if its the case.</p>
</dd></dl>

<dl class="method">
<dt id="wishbone.modules.tippingbucket.TippingBucket.resetBuffer">
<tt class="descname">resetBuffer</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/wishbone/modules/tippingbucket.html#TippingBucket.resetBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wishbone.modules.tippingbucket.TippingBucket.resetBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the counters.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modules and Classes</a><ul>
<li><a class="reference internal" href="#module-wishbone.main">Wishbone</a></li>
<li><a class="reference internal" href="#module-wishbone.toolkit">Toolkit</a></li>
</ul>
</li>
<li><a class="reference internal" href="#io-modules">IO modules</a><ul>
<li><a class="reference internal" href="#module-wishbone.io_modules.broker">Broker</a></li>
<li><a class="reference internal" href="#module-wishbone.io_modules.domainsocket">DomainSocket</a></li>
<li><a class="reference internal" href="#module-wishbone.io_modules.inputgenerator">InputGenerator</a></li>
<li><a class="reference internal" href="#module-wishbone.io_modules.namedpipe">NamedPipe</a></li>
<li><a class="reference internal" href="#module-wishbone.io_modules.udpserver">UDPserver</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modules">Modules</a><ul>
<li><a class="reference internal" href="#module-wishbone.modules.brokerloopback">BrokerLoopback</a></li>
<li><a class="reference internal" href="#module-wishbone.modules.compressor">Compressor</a></li>
<li><a class="reference internal" href="#module-wishbone.modules.jsonvalidator">Jsonvalidator</a></li>
<li><a class="reference internal" href="#module-wishbone.modules.skeleton">Skeleton</a></li>
<li><a class="reference internal" href="#module-wishbone.modules.stdout">STDOUT</a></li>
<li><a class="reference internal" href="#module-wishbone.modules.tippingbucket">TippingBucket</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="example.html"
                        title="previous chapter">Example</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="install.html"
                        title="next chapter">Installation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/classes.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >next</a> |</li>
        <li class="right" >
          <a href="example.html" title="Example"
             >previous</a> |</li>
        <li><a href="index.html">Wishbone 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jelle Smet.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>