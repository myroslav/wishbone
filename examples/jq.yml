---
modules:

  input:
    module: wishbone.input.tcp
    description: Takes JSON data in over TCP port 19283

  decode:
    module: wishbone.decode.json
    description: Converts JSON into a Python data structure

  evaluate:
    module: wishbone.flow.jq
    description: Evaluates the datastructure against a jq condition
    arguments:
      location: ./rules
      conditions:
        - name: test
          queue: hello
          expression: '.greeting | test( "hello" )'
          payload:
            "@tmp.blah": "matched :)"

  screen:
    module: wishbone.output.stdout
    description: Prints the complete event to STDOUT.
    arguments:
      selection: ""

routingtable:
  - input.outbox   -> decode.inbox
  - decode.outbox  -> evaluate.inbox
  - evaluate.hello -> screen.inbox
...
